formato comunicación Host-Sat
-----------------------------

Hay dos canales de comunicacion HS y SH, los dos son peticiones ajax iniciadas por el Sat.
	HS:
		pagina web: /hs/
		sirve para enviar peticiones del Host al Sat y recibir la respuesta del Sat.
		Como el único que puede iniciar una petición Ajax es el Sat, la petición del Host al
		Sat se realiza en la repuesta Ajax. Y la respuesta del Sat en la siguiente petición Ajax.
	SH:
		pagina web: /sh/
		sirve para enviar peticiones del Sat al Host y recibir la respuesta del Host.
		Se realiza con una petición Ajax.
		
Canal HS
	Petición:
		{ sec:, q: }
		sec: 
			núm de secuencia petición, se incrementa en cada petición
			Al recibir la respuesta el Host verifica si la sec. enviada por el Sat es la misma que la
			que espera. Sino la descarta(se habia reenviado pero el host ya lo habia recibido).
		q: (questions) array [q1,...,qn]
			formato de cada question(qi) : { type:, age:, ... }
			por type:
				"c": (createObj) {id: idObj, type: "c", obj: createObjSat, args: [arg1, ..., argn] }
				"f": (call) {id: idObj, type: "f", func: function name, args: [arg1, ..., argn] }
				"s": (script) {type: "s", script: como string}
				"i": {inicialización) {type: "i", tsInit: marca inicialización}
					tsInit se devuelve en cada respuesta del sat (i:)
				"d": (destroy Obj) {id:idObj, type: "d"}
				"e": (generate Err) {type: "e", er: mensaje err devuelto a host(usado en maxAge)}
				"y": (async answer) {type: "y", id:asyncId, ret:, er:, age:}
			age: time desde que se genero la petición hasta que se ha podido enviar	
	Respuesta: 
		{ idSat:, ts:, i:, sec:, a: }
		idSat:
		ts: time del Sat
		i: marca de inicialización dada por el host
			si la marca que recibe el host, es diferente a la que el tiene, significa que el Sat
			esta desactualizado y tiene que reiniciarse. 
			Para reinicializar el Sat el host envia la respuesta con el formato:
			{ r: true, er:(mensaje con la razón del reinicio)
			También se tendra que reinicializar si hay dos Sats con el mismo idSat
			La primera petición Ajax HS no envia este campo, para indicarle al host que es un Sat
			que se esta inicializando.
		sec: 
			devuelve el núm de secuencia enviado en el mensaje de petición del Host.
		a: (answers) array [a1,...,an]
			formato de cada answer(ai) : { ret:, er:, age:, asyncId: }
				ret: retorno de la función
				er: mensaje(string) de exceptión
				age: tiempo total de comunicación
				asyncId: la respuesta se enviara en otra petición con este Id si != null
				
				
Canal SH
	Petición:
		{ idSat:, ts:, i:, sec:, q: }
		idSat:
		ts:
		i: (igual que HS)
		sec: 
			secuencia generada por Sat. Si el host recibe una sec. que ya ha enviado, reenvia la 
			respuesta que tenia guardada.(Se habia perdido la repuesta y se ha reenviado la petición)
		q: (questions) array [q1,...,qn]
			formato de cada question(qi) : { type:, age:, ... }
				"f": (call) {id: idObj, type: "f", func: function name, args: [arg1, ..., argn] }
				"y": (async answer) {type: "y", id:asyncId, ret:, er:, age:}
			age: time desde que se genero la petición hasta que se ha podido enviar	
	Respuesta: 
		{ a: }			
		a: (answers) array [a1,...,an]
			formato de cada answer(ai) : { ret:, er:, age:, asyncId: }
				ret: retorno de la función
				er: mensaje(string) de exceptión
				age: tiempo total de comunicación
				asyncId: la respuesta se enviara en otra petición con este Id si != null

				
				
			
			