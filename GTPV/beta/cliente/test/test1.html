<!DOCTYPE html>
<html style="height:100%;">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<script src="jquery.js" ></script>
		<script>
			$(function() {
				var scr = $('#scroll1');
				var startX, startScrLeft;
				var id;
				var body = $('body');
				var w = body.width();
				console.log(w);
				scr.bind('touchstart', function(ev) {
					var touch = ev.originalEvent.changedTouches[0];
					id = touch.identifier;
					startX = touch.clientX;
					startScrLeft = scr.position().left;
					ev.preventDefault();
				});
				scr.bind('touchmove', function(ev) {
					var touches = ev.originalEvent.touches;
					for (var i=0; i<touches.length; i++) {
						if (touches[i].identifier == id) {
							var left = startScrLeft+(touches[i].clientX-startX);
							if (left > 0) left = 0;
							scr.css({transitionProperty: 'none'});
							scr.css('left', left);
							break;
						}
					}	
					ev.preventDefault();
				});
				scr.bind('touchend', function(ev) {
					alignScr();
					ev.preventDefault();
				
				});
				function getPage() {
					var left = -parseInt(scr.css('left'));
					var page = Math.round(left/w);
					return page;
				}
				function resizeHandler() {
					w = body.width();
					scr.width(w*10);
					scr.children().css('width', w+'px');
					alignScr();
				}
				function alignScr() {
					var left = -parseInt(scr.css('left'));
					var page = Math.round(left/w);
					scr.css({transitionProperty: 'left'});
					scr.css({transitionEffect: 'ease-in'});
					scr.css({transitionDuration: '1s'});
					scr.css('left', -page*w);		
				}
				for (var i=0; i<10; i++) {
					var d = $('<div>').css({height:'100%', display:'inline-block'});
					d.css({boxSizing:'border-box'});
					d.css({border: '10px solid '+(i%2?'red':'black')});
					scr.append(d);
				}
				resizeHandler();
				$(window).resize(resizeHandler);
			});
		</script>
	</head>
	<body style="margin:0;border:0;padding:0;height:100%;overflow:hidden">
		<div id="scroll1" style="height:100%;position:relative" >
		</div>
	</body>
</html>
